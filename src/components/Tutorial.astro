---
const {x} = Astro.props
import '../styles.css';
---

<astro-tutorial>
    <button
    id="showTutorial"
    class="w-full p-3 bg-transparent border border-gray-800 text-gray-800 rounded-md flex items-center justify-center mt-4 hover:bg-neutral-200"
    style="margin-top: 10px"
    >
    <svg
        fill="#000000"
        height="30px"
        width="30px"
        version="1.1"
        id="Capa_1"
        style="margin-right: 10px"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 324.952 324.952"
        xml:space="preserve"
        >
        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
        <g id="SVGRepo_iconCarrier">
            <path d="M323.195,33.502c-2.342-2.344-6.143-2.344-8.484,0c-20.718,20.718-31.436,18.955-43.851,16.909 c-13.984-2.301-29.752-4.876-56.232,19.795c-15.643-15.121-36.605-23.45-59.216-23.45c-25.451,0-50.795,10.747-69.532,29.485 L85.1,77.02c-0.003,0.003-0.008,0.005-0.011,0.009c-0.003,0.004-0.006,0.008-0.009,0.011l-55.644,55.643 c-37.173,37.172-39.447,95.383-5.069,129.761l6.349,6.349c15.744,15.745,37.135,24.416,60.231,24.416 c25.45,0,50.793-10.747,69.53-29.485l55.643-55.643c0.003-0.003,0.008-0.005,0.011-0.009c0.003-0.004,0.006-0.008,0.009-0.011 l0.78-0.78c36.759-36.758,39.368-94.071,6.184-128.587c21.929-20.368,33.549-18.461,45.807-16.442 c13.692,2.251,29.21,4.81,54.284-20.266C325.538,39.643,325.538,35.844,323.195,33.502z M206.061,78.615l-26.668,26.668 c-3.842-2.324-8.255-3.566-12.86-3.566c-6.655,0-12.911,2.591-17.617,7.297l-11.679,11.68l-39.318-39.32 c16.071-14.421,36.762-22.617,57.493-22.617C174.774,58.756,192.689,65.807,206.061,78.615z M152.126,159.297 c-2.44,2.439-5.684,3.783-9.133,3.783c-3.449,0-6.692-1.343-9.131-3.781c-2.438-2.439-3.781-5.682-3.781-9.131 s1.344-6.692,3.783-9.132l23.536-23.538c2.439-2.438,5.682-3.781,9.132-3.781c3.449,0,6.692,1.343,9.131,3.781 c2.439,2.439,3.782,5.682,3.782,9.132c0,3.448-1.343,6.691-3.781,9.13L152.126,159.297z M151.992,255.239 c-16.504,16.504-38.754,25.97-61.045,25.97c-19.892,0-38.268-7.423-51.746-20.9l-6.349-6.349 c-29.699-29.7-27.425-80.298,5.068-112.792l51.41-51.41l39.42,39.421l-3.372,3.372c-4.706,4.705-7.298,10.962-7.298,17.616 c-0.001,6.654,2.59,12.911,7.296,17.617c4.705,4.705,10.962,7.296,17.616,7.296c6.654,0,12.911-2.592,17.617-7.298l3.373-3.373 l39.42,39.42L151.992,255.239z M211.788,195.245l-39.32-39.32l11.681-11.68c4.706-4.705,7.297-10.961,7.297-17.616 c0-4.605-1.243-9.019-3.567-12.86l26.665-26.667C242.091,115.858,240.675,163.118,211.788,195.245z"></path>
        </g>
    </svg>
    Keymappings
    </button>
    
    <dialog id="tutorial">
        <button
            class="w-full flex m-0 text-xs p-1 cursor-pointer rounded bg-white hover:bg-gray-300"
            autofocus id="close-button">Close</button
        >
        <div style="">
            <div class="row">
                <div>
                    <span class="boxed">Mouse Left</span>
                </div>
                <p>Select</p>
            </div>

            <div class="row">
                <div>
                    <span class="boxed">Mouse Left</span> + Drag
                </div>

                <p>Move</p>
            </div>

            <div class="row">
                <div>
                    <span class="boxed">Mouse Right</span> | <span
                        class="boxed">Middle</span
                    > + Drag
                </div>
                <p>Scale</p>
            </div>

            <div class="row">
                <div>
                    <span class="boxed">ESC</span>
                </div>

                <p>Cancel</p>
            </div>
            <div class="row">
                <div>
                    <span class="boxed">CTRL</span> + <span
                        class="boxed">A</span
                    >
                </div>

                <p>Select All</p>
            </div>

            <div class="row">
                <div>
                    <span class="boxed">SHIFT</span> + <span
                        class="boxed">Mouse Left</span
                    >
                </div>

                <p>Select Multiple</p>
            </div>

            <div class="row">
                <div>
                    <span class="boxed">←</span> / <span
                        class="boxed">→</span
                    >
                </div>

                <p>Rotate -45 / +45</p>
            </div>
            <div class="row">
                <div>
                    <span class="boxed">L</span>
                </div>

                <p>Toggle Labels</p>
            </div>
        </div>
    </dialog>
</astro-tutorial>

<script>
    class Tutorial extends HTMLElement {
        dialog;
        showTutorial;
        closeButton;
        connectedCallback(){

            //Tutorial

            this.dialog = this.querySelector("#tutorial");
            this.closeButton = this.querySelector("#close-button");
            this.showTutorial = this.querySelector("#showTutorial");

            if(this.showTutorial){
                this.showTutorial.addEventListener("click", () => {
                    this.dialog.showModal()
                });
            }

            if(this.closeButton){
                // "Close" button closes the dialog
                this.closeButton.addEventListener("click", () => {
                    this.dialog.close();
                });
            }

            if(this.dialog){
                // "Close" button closes the dialog
                this.dialog.addEventListener("click", () => {
                    this.dialog.close();
                });
            }
        }
        
        getDialog(){
            return this.querySelector("#tutorial");
        }

        showDialog(){
            return this.dialog.showModal();
        }
    }
    customElements.define('astro-tutorial', Tutorial);
</script>